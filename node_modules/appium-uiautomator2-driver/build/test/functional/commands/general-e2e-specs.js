'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _desired = require('../desired');

var _helpersSession = require('../helpers/session');

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('general', function () {

  var driver = undefined;
  before(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap((0, _helpersSession.initDriver)(_desired.APIDEMOS_CAPS));

        case 2:
          driver = context$2$0.sent;

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, this);
  });
  after(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          if (!driver) {
            context$2$0.next = 3;
            break;
          }

          context$2$0.next = 3;
          return _regeneratorRuntime.awrap(driver.quit());

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, this);
  });

  describe('startActivity', function () {
    it('should launch a new package and activity', function callee$2$0() {
      var appPackage, appActivity, startAppPackage, startAppActivity, newAppPackage, newAppActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage());

          case 2:
            appPackage = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 5:
            appActivity = context$3$0.sent;

            appPackage.should.equal('io.appium.android.apis');
            appActivity.should.equal('.ApiDemos');

            startAppPackage = 'io.appium.android.apis';
            startAppActivity = '.view.SplitTouchView';
            context$3$0.next = 12;
            return _regeneratorRuntime.awrap(driver.startActivity({ appPackage: startAppPackage, appActivity: startAppActivity }));

          case 12:
            context$3$0.next = 14;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage());

          case 14:
            newAppPackage = context$3$0.sent;
            context$3$0.next = 17;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 17:
            newAppActivity = context$3$0.sent;

            newAppPackage.should.equal(startAppPackage);
            newAppActivity.should.equal(startAppActivity);

          case 20:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should be able to launch activity with custom intent parameter category', function callee$2$0() {
      var startAppPackage, startAppActivity, startIntentCategory, appActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            startAppPackage = 'io.appium.android.apis';
            startAppActivity = 'io.appium.android.apis.app.HelloWorld';
            startIntentCategory = 'appium.android.intent.category.SAMPLE_CODE';
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.startActivity({ appPackage: startAppPackage, appActivity: startAppActivity, intentCategory: startIntentCategory }));

          case 5:
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 7:
            appActivity = context$3$0.sent;

            appActivity.should.include('HelloWorld');

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should be able to launch activity with dontStopAppOnReset = true', function callee$2$0() {
      var startAppPackage, startAppActivity, appPackage, appActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            startAppPackage = 'io.appium.android.apis';
            startAppActivity = '.os.MorseCode';
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity({ appPackage: startAppPackage, appActivity: startAppActivity }));

          case 4:
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage());

          case 6:
            appPackage = context$3$0.sent;
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 9:
            appActivity = context$3$0.sent;

            appPackage.should.equal(startAppPackage);
            appActivity.should.equal(startAppActivity);

          case 12:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should be able to launch activity with dontStopAppOnReset = false', function callee$2$0() {
      var startAppPackage, startAppActivity, appPackage, appActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            startAppPackage = 'io.appium.android.apis';
            startAppActivity = '.os.MorseCode';
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity({ appPackage: startAppPackage, appActivity: startAppActivity }));

          case 4:
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage());

          case 6:
            appPackage = context$3$0.sent;
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 9:
            appActivity = context$3$0.sent;

            appPackage.should.equal(startAppPackage);
            appActivity.should.equal(startAppActivity);

          case 12:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZnVuY3Rpb25hbC9jb21tYW5kcy9nZW5lcmFsLWUyZS1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7b0JBQWlCLE1BQU07Ozs7OEJBQ0ksa0JBQWtCOzs7O3VCQUNmLFlBQVk7OzhCQUNmLG9CQUFvQjs7QUFFL0Msa0JBQUssTUFBTSxFQUFFLENBQUM7QUFDZCxrQkFBSyxHQUFHLDZCQUFnQixDQUFDOztBQUV6QixRQUFRLENBQUMsU0FBUyxFQUFFLFlBQVk7O0FBRTlCLE1BQUksTUFBTSxZQUFBLENBQUM7QUFDWCxRQUFNLENBQUM7Ozs7OzJDQUNVLHVEQUF5Qjs7O0FBQXhDLGdCQUFNOzs7Ozs7O0dBQ1AsQ0FBQyxDQUFDO0FBQ0gsT0FBSyxDQUFDOzs7O2VBQ0EsTUFBTTs7Ozs7OzJDQUNGLE1BQU0sQ0FBQyxJQUFJLEVBQUU7Ozs7Ozs7R0FFdEIsQ0FBQyxDQUFDOztBQUVILFVBQVEsQ0FBQyxlQUFlLEVBQUUsWUFBWTtBQUNwQyxNQUFFLENBQUMsMENBQTBDLEVBQUU7VUFDekMsVUFBVSxFQUNWLFdBQVcsRUFJWCxlQUFlLEVBQ2YsZ0JBQWdCLEVBSWhCLGFBQWEsRUFDYixjQUFjOzs7Ozs2Q0FYTSxNQUFNLENBQUMsaUJBQWlCLEVBQUU7OztBQUE5QyxzQkFBVTs7NkNBQ1csTUFBTSxDQUFDLGtCQUFrQixFQUFFOzs7QUFBaEQsdUJBQVc7O0FBQ2Ysc0JBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDbEQsdUJBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDOztBQUVsQywyQkFBZSxHQUFHLHdCQUF3QjtBQUMxQyw0QkFBZ0IsR0FBRyxzQkFBc0I7OzZDQUV2QyxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUMsVUFBVSxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQUMsQ0FBQzs7Ozs2Q0FFN0QsTUFBTSxDQUFDLGlCQUFpQixFQUFFOzs7QUFBakQseUJBQWE7OzZDQUNXLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRTs7O0FBQW5ELDBCQUFjOztBQUNsQix5QkFBYSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDNUMsMEJBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7Ozs7Ozs7S0FDL0MsQ0FBQyxDQUFDO0FBQ0gsTUFBRSxDQUFDLHlFQUF5RSxFQUFFO1VBQ3hFLGVBQWUsRUFDZixnQkFBZ0IsRUFDaEIsbUJBQW1CLEVBSW5CLFdBQVc7Ozs7QUFOWCwyQkFBZSxHQUFHLHdCQUF3QjtBQUMxQyw0QkFBZ0IsR0FBRyx1Q0FBdUM7QUFDMUQsK0JBQW1CLEdBQUcsNENBQTRDOzs2Q0FFaEUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFDLFVBQVUsRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxtQkFBbUIsRUFBQyxDQUFDOzs7OzZDQUVwRyxNQUFNLENBQUMsa0JBQWtCLEVBQUU7OztBQUFoRCx1QkFBVzs7QUFDZix1QkFBVyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7Ozs7Ozs7S0FDMUMsQ0FBQyxDQUFDO0FBQ0gsTUFBRSxDQUFDLGtFQUFrRSxFQUFFO1VBQ2pFLGVBQWUsRUFDZixnQkFBZ0IsRUFHaEIsVUFBVSxFQUNWLFdBQVc7Ozs7QUFMWCwyQkFBZSxHQUFHLHdCQUF3QjtBQUMxQyw0QkFBZ0IsR0FBRyxlQUFlOzs2Q0FDaEMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFDLFVBQVUsRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFDLENBQUM7Ozs7NkNBRWhFLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRTs7O0FBQTlDLHNCQUFVOzs2Q0FDVyxNQUFNLENBQUMsa0JBQWtCLEVBQUU7OztBQUFoRCx1QkFBVzs7QUFDZixzQkFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDekMsdUJBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7Ozs7Ozs7S0FDNUMsQ0FBQyxDQUFDO0FBQ0gsTUFBRSxDQUFDLG1FQUFtRSxFQUFFO1VBQ2xFLGVBQWUsRUFDZixnQkFBZ0IsRUFHaEIsVUFBVSxFQUNWLFdBQVc7Ozs7QUFMWCwyQkFBZSxHQUFHLHdCQUF3QjtBQUMxQyw0QkFBZ0IsR0FBRyxlQUFlOzs2Q0FDaEMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFDLFVBQVUsRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFDLENBQUM7Ozs7NkNBRWpFLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRTs7O0FBQTdDLHNCQUFVOzs2Q0FDVSxNQUFNLENBQUMsa0JBQWtCLEVBQUU7OztBQUEvQyx1QkFBVzs7QUFDZixzQkFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDekMsdUJBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7Ozs7Ozs7S0FDNUMsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvZnVuY3Rpb25hbC9jb21tYW5kcy9nZW5lcmFsLWUyZS1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IHsgQVBJREVNT1NfQ0FQUyB9IGZyb20gJy4uL2Rlc2lyZWQnO1xuaW1wb3J0IHsgaW5pdERyaXZlciB9IGZyb20gJy4uL2hlbHBlcnMvc2Vzc2lvbic7XG5cbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmRlc2NyaWJlKCdnZW5lcmFsJywgZnVuY3Rpb24gKCkge1xuXG4gIGxldCBkcml2ZXI7XG4gIGJlZm9yZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgZHJpdmVyID0gYXdhaXQgaW5pdERyaXZlcihBUElERU1PU19DQVBTKTtcbiAgfSk7XG4gIGFmdGVyKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZHJpdmVyKSB7XG4gICAgICBhd2FpdCBkcml2ZXIucXVpdCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3N0YXJ0QWN0aXZpdHknLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBsYXVuY2ggYSBuZXcgcGFja2FnZSBhbmQgYWN0aXZpdHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgYXBwUGFja2FnZSA9ICBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudFBhY2thZ2UoKTtcbiAgICAgIGxldCBhcHBBY3Rpdml0eSA9ICBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudEFjdGl2aXR5KCk7XG4gICAgICBhcHBQYWNrYWdlLnNob3VsZC5lcXVhbCgnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycpO1xuICAgICAgYXBwQWN0aXZpdHkuc2hvdWxkLmVxdWFsKCcuQXBpRGVtb3MnKTtcblxuICAgICAgbGV0IHN0YXJ0QXBwUGFja2FnZSA9ICdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJztcbiAgICAgIGxldCBzdGFydEFwcEFjdGl2aXR5ID0gJy52aWV3LlNwbGl0VG91Y2hWaWV3JztcblxuICAgICAgYXdhaXQgZHJpdmVyLnN0YXJ0QWN0aXZpdHkoe2FwcFBhY2thZ2U6IHN0YXJ0QXBwUGFja2FnZSwgYXBwQWN0aXZpdHk6IHN0YXJ0QXBwQWN0aXZpdHl9KTtcblxuICAgICAgbGV0IG5ld0FwcFBhY2thZ2UgPSAgYXdhaXQgZHJpdmVyLmdldEN1cnJlbnRQYWNrYWdlKCk7XG4gICAgICBsZXQgbmV3QXBwQWN0aXZpdHkgPSAgYXdhaXQgZHJpdmVyLmdldEN1cnJlbnRBY3Rpdml0eSgpO1xuICAgICAgbmV3QXBwUGFja2FnZS5zaG91bGQuZXF1YWwoc3RhcnRBcHBQYWNrYWdlKTtcbiAgICAgIG5ld0FwcEFjdGl2aXR5LnNob3VsZC5lcXVhbChzdGFydEFwcEFjdGl2aXR5KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gbGF1bmNoIGFjdGl2aXR5IHdpdGggY3VzdG9tIGludGVudCBwYXJhbWV0ZXIgY2F0ZWdvcnknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgc3RhcnRBcHBQYWNrYWdlID0gJ2lvLmFwcGl1bS5hbmRyb2lkLmFwaXMnO1xuICAgICAgbGV0IHN0YXJ0QXBwQWN0aXZpdHkgPSAnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcy5hcHAuSGVsbG9Xb3JsZCc7XG4gICAgICBsZXQgc3RhcnRJbnRlbnRDYXRlZ29yeSA9ICdhcHBpdW0uYW5kcm9pZC5pbnRlbnQuY2F0ZWdvcnkuU0FNUExFX0NPREUnO1xuXG4gICAgICBhd2FpdCBkcml2ZXIuc3RhcnRBY3Rpdml0eSh7YXBwUGFja2FnZTogc3RhcnRBcHBQYWNrYWdlLCBhcHBBY3Rpdml0eTogc3RhcnRBcHBBY3Rpdml0eSwgaW50ZW50Q2F0ZWdvcnk6IHN0YXJ0SW50ZW50Q2F0ZWdvcnl9KTtcblxuICAgICAgbGV0IGFwcEFjdGl2aXR5ID0gIGF3YWl0IGRyaXZlci5nZXRDdXJyZW50QWN0aXZpdHkoKTtcbiAgICAgIGFwcEFjdGl2aXR5LnNob3VsZC5pbmNsdWRlKCdIZWxsb1dvcmxkJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGxhdW5jaCBhY3Rpdml0eSB3aXRoIGRvbnRTdG9wQXBwT25SZXNldCA9IHRydWUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgc3RhcnRBcHBQYWNrYWdlID0gJ2lvLmFwcGl1bS5hbmRyb2lkLmFwaXMnO1xuICAgICAgbGV0IHN0YXJ0QXBwQWN0aXZpdHkgPSAnLm9zLk1vcnNlQ29kZSc7XG4gICAgICBhd2FpdCBkcml2ZXIuc3RhcnRBY3Rpdml0eSh7YXBwUGFja2FnZTogc3RhcnRBcHBQYWNrYWdlLCBhcHBBY3Rpdml0eTogc3RhcnRBcHBBY3Rpdml0eX0pO1xuXG4gICAgICBsZXQgYXBwUGFja2FnZSA9ICBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudFBhY2thZ2UoKTtcbiAgICAgIGxldCBhcHBBY3Rpdml0eSA9ICBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudEFjdGl2aXR5KCk7XG4gICAgICBhcHBQYWNrYWdlLnNob3VsZC5lcXVhbChzdGFydEFwcFBhY2thZ2UpO1xuICAgICAgYXBwQWN0aXZpdHkuc2hvdWxkLmVxdWFsKHN0YXJ0QXBwQWN0aXZpdHkpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgYmUgYWJsZSB0byBsYXVuY2ggYWN0aXZpdHkgd2l0aCBkb250U3RvcEFwcE9uUmVzZXQgPSBmYWxzZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBzdGFydEFwcFBhY2thZ2UgPSAnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcyc7XG4gICAgICBsZXQgc3RhcnRBcHBBY3Rpdml0eSA9ICcub3MuTW9yc2VDb2RlJztcbiAgICAgIGF3YWl0IGRyaXZlci5zdGFydEFjdGl2aXR5KHthcHBQYWNrYWdlOiBzdGFydEFwcFBhY2thZ2UsIGFwcEFjdGl2aXR5OiBzdGFydEFwcEFjdGl2aXR5fSk7XG5cbiAgICAgIGxldCBhcHBQYWNrYWdlID0gYXdhaXQgZHJpdmVyLmdldEN1cnJlbnRQYWNrYWdlKCk7XG4gICAgICBsZXQgYXBwQWN0aXZpdHkgPSBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudEFjdGl2aXR5KCk7XG4gICAgICBhcHBQYWNrYWdlLnNob3VsZC5lcXVhbChzdGFydEFwcFBhY2thZ2UpO1xuICAgICAgYXBwQWN0aXZpdHkuc2hvdWxkLmVxdWFsKHN0YXJ0QXBwQWN0aXZpdHkpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLi8uLiJ9
