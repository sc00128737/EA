'use strict';

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.createProxyServer = createProxyServer;
exports.addHandler = addHandler;

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

function createProxyServer(sessionId, port) {
  // Start an express server for proxying
  var app = new _express2['default']();
  app.use(_bodyParser2['default'].json());
  var server = app.listen(port);
  return { app: app, server: server };
}

var handlers = {
  post: {},
  get: {},
  'delete': {},
  put: {}
};

function addHandler(app, method, url, handler) {
  var _this = this;

  method = method.toLowerCase();
  if (!handlers[method][url]) {
    app[method](url, function (req, res) {
      return handlers[method][url].call(_this, req, res);
    });
  }
  handlers[method][url] = handler;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvbWpzb253cC9oZWxwZXJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7dUJBQW9CLFNBQVM7Ozs7MEJBQ04sYUFBYTs7OztBQUU3QixTQUFTLGlCQUFpQixDQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUU7O0FBRWxELE1BQUksR0FBRyxHQUFHLDBCQUFhLENBQUM7QUFDeEIsS0FBRyxDQUFDLEdBQUcsQ0FBQyx3QkFBVyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQzNCLE1BQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDOUIsU0FBTyxFQUFDLEdBQUcsRUFBSCxHQUFHLEVBQUUsTUFBTSxFQUFOLE1BQU0sRUFBQyxDQUFDO0NBQ3RCOztBQUVELElBQUksUUFBUSxHQUFHO0FBQ2IsTUFBSSxFQUFFLEVBQUU7QUFDUixLQUFHLEVBQUUsRUFBRTtBQUNQLFlBQVEsRUFBRTtBQUNWLEtBQUcsRUFBRSxFQUFFO0NBQ1IsQ0FBQzs7QUFFSyxTQUFTLFVBQVUsQ0FBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUU7OztBQUNyRCxRQUFNLEdBQUcsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQzlCLE1BQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDMUIsT0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxVQUFDLEdBQUcsRUFBRSxHQUFHO2FBQUssUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksUUFBTyxHQUFHLEVBQUUsR0FBRyxDQUFDO0tBQUEsQ0FBQyxDQUFDO0dBQzVFO0FBQ0QsVUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQztDQUNqQyIsImZpbGUiOiJ0ZXN0L21qc29ud3AvaGVscGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFeHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJveHlTZXJ2ZXIgKHNlc3Npb25JZCwgcG9ydCkge1xuICAvLyBTdGFydCBhbiBleHByZXNzIHNlcnZlciBmb3IgcHJveHlpbmdcbiAgbGV0IGFwcCA9IG5ldyBFeHByZXNzKCk7XG4gIGFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuICBsZXQgc2VydmVyID0gYXBwLmxpc3Rlbihwb3J0KTtcbiAgcmV0dXJuIHthcHAsIHNlcnZlcn07XG59XG5cbmxldCBoYW5kbGVycyA9IHtcbiAgcG9zdDoge30sXG4gIGdldDoge30sXG4gIGRlbGV0ZToge30sXG4gIHB1dDoge30sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkSGFuZGxlciAoYXBwLCBtZXRob2QsIHVybCwgaGFuZGxlcikge1xuICBtZXRob2QgPSBtZXRob2QudG9Mb3dlckNhc2UoKTtcbiAgaWYgKCFoYW5kbGVyc1ttZXRob2RdW3VybF0pIHtcbiAgICBhcHBbbWV0aG9kXSh1cmwsIChyZXEsIHJlcykgPT4gaGFuZGxlcnNbbWV0aG9kXVt1cmxdLmNhbGwodGhpcywgcmVxLCByZXMpKTtcbiAgfVxuICBoYW5kbGVyc1ttZXRob2RdW3VybF0gPSBoYW5kbGVyO1xufSJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
